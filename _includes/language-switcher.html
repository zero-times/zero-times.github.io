<!-- Language Switch Component -->
<div id="language-switcher" class="language-switcher">
  <select onchange="changeLanguage(this.value)">
    <option value="pt-br" {{ page.lang == 'pt-br' or page.lang == nil ? 'selected' : '' }}>ğŸ‡§ğŸ‡· PortuguÃªs</option>
    <option value="en" {{ page.lang == 'en' ? 'selected' : '' }}>ğŸ‡ºğŸ‡¸ English</option>
    <option value="zh" {{ page.lang == 'zh' ? 'selected' : '' }}>ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
  </select>
</div>

<script>
  // FunÃ§Ã£o para mudar o idioma
  function changeLanguage(lang) {
    // Armazenar o idioma selecionado no localStorage
    localStorage.setItem('preferred-language', lang);
    
    // Recarregar a pÃ¡gina para aplicar as alteraÃ§Ãµes
    location.reload();
  }
  
  // FunÃ§Ã£o para obter o idioma preferido
  function getPreferredLanguage() {
    // Verificar se hÃ¡ um idioma armazenado
    const storedLang = localStorage.getItem('preferred-language');
    if (storedLang) {
      return storedLang;
    }
    
    // Caso contrÃ¡rio, verificar o idioma do navegador
    const browserLang = navigator.language || navigator.userLanguage;
    if (browserLang.startsWith('pt')) {
      return 'pt-br';
    } else if (browserLang.startsWith('en')) {
      return 'en';
    } else if (browserLang.startsWith('zh')) {
      return 'zh';
    }
    
    // PadrÃ£o para portuguÃªs
    return 'pt-br';
  }
  
  // Aplicar o idioma preferido quando a pÃ¡gina carregar
  document.addEventListener('DOMContentLoaded', function() {
    const preferredLang = getPreferredLanguage();
    // Atualizar o seletor de idioma
    const selector = document.querySelector('#language-switcher select');
    if (selector) {
      selector.value = preferredLang;
    }
  });
</script>